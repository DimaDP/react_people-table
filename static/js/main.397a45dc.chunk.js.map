{"version":3,"sources":["components/HomePage.tsx","components/PersonName.tsx","components/PersonRow.tsx","components/PeopleTable.tsx","api.tsx","components/PeoplePage.tsx","components/Error404.tsx","App.tsx","index.tsx"],"names":["HomePage","PersonName","person","location","useLocation","searchParams","URLSearchParams","search","to","pathname","slug","toString","className","sex","name","PersonRow","url","replace","born","died","undefined","mother","motherName","father","fatherName","PeopleTable","peoples","handleSorting","sortField","get","sortOrder","onClick","people","sort","a","b","localeCompare","reverse","sortPeople","map","key","loadPeople","fetch","then","response","json","find","PeoplePage","props","history","useHistory","query","useState","setPeople","visiblePeople","setVisiblePeople","useEffect","filter","toLowerCase","includes","debounceTimeout","type","value","onChange","target","set","push","placeholder","match","event","sortParam","currentTarget","innerHTML","Error404","App","exact","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.397a45dc.chunk.js","sourcesContent":["import React from 'react';\n\nexport const HomePage = () => {\n  return (\n    <h1>Home Page</h1>\n  );\n};\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { PersonWithParents, Person } from './types';\n\nexport interface PersonNameProps {\n  person: PersonWithParents | Person;\n}\n\nexport const PersonName: React.FC<PersonNameProps> = ({ person }) => {\n  const location = useLocation();\n  const searchParams = new URLSearchParams(location.search);\n\n  return (\n    <Link\n      to={{\n        pathname: `/people/${person.slug}`,\n        search: searchParams.toString(),\n      }}\n      className={person.sex === 'f' ? 'red' : 'blue'}\n    >\n      {person.name}\n    </Link>\n  );\n};\n","import React from 'react';\n// eslint-disable-next-line import/no-cycle\nimport { PersonName } from './PersonName';\nimport { PersonWithParents } from './types';\n\nexport interface PersonRowProps {\n  person: PersonWithParents;\n  url: string;\n}\n\nexport const PersonRow: React.FC<PersonRowProps> = ({ person, url }) => {\n  return (\n    <tr className={person.slug === url.replace('/people/', '') ? 'highlight' : ''}>\n      <td><PersonName person={person} /></td>\n      <td>{person.sex}</td>\n      <td>{person.born}</td>\n      <td>{person.died}</td>\n      <td>\n        {(person.mother === undefined) ? person.motherName : <PersonName person={person.mother} />}\n      </td>\n      <td>\n        {(person.father === undefined) ? person.fatherName : <PersonName person={person.father} />}\n      </td>\n    </tr>\n  );\n};\n","import React, { MouseEventHandler } from 'react';\nimport { useLocation } from 'react-router';\nimport { PersonRow } from './PersonRow';\nimport { PersonWithParents } from './types';\n\ninterface PeopleTableProps {\n  peoples: PersonWithParents[];\n  url: string;\n  handleSorting: MouseEventHandler<{innerHTML: string}>;\n}\n\nexport const PeopleTable: React.FC<PeopleTableProps> = ({ peoples, url, handleSorting }) => {\n  const location = useLocation();\n  const searchParams = new URLSearchParams(location.search);\n  const sortField = searchParams.get('sortBy') || '';\n  const sortOrder = searchParams.get('sortOrder') || '';\n\n  const sortPeople = (people: PersonWithParents[]) => {\n    if (sortOrder) {\n      switch (sortField) {\n        case 'name':\n          people\n            .sort((a, b) => a.name.localeCompare(b.name));\n          break;\n\n        case 'sex':\n          people\n            .sort((a, b) => a.sex.localeCompare(b.sex));\n          break;\n\n        case 'born':\n          people\n            .sort((a, b) => a.born - b.born);\n          break;\n\n        case 'died':\n          people\n            .sort((a, b) => a.died - (b.died));\n          break;\n\n        default:\n      }\n    }\n\n    if (sortOrder === 'desc') {\n      people.reverse();\n    }\n\n    return people;\n  };\n\n  return (\n    <table className=\"table\">\n      <thead>\n        <tr>\n          <th onClick={handleSorting} className={sortField === 'name' ? 'title' : ''}>name</th>\n          <th onClick={handleSorting} className={sortField === 'sex' ? 'title' : ''}>sex</th>\n          <th onClick={handleSorting} className={sortField === 'born' ? 'title' : ''}>born</th>\n          <th onClick={handleSorting} className={sortField === 'died' ? 'title' : ''}>died</th>\n          <th>mother</th>\n          <th>father</th>\n        </tr>\n      </thead>\n      <tbody>\n        {sortPeople(peoples).map((person: PersonWithParents) => (\n          <PersonRow person={person} url={url} key={person.slug} />\n        ))}\n      </tbody>\n    </table>\n  );\n};\n","import { Person, PersonWithParents } from './components/types';\n\nconst URL = 'https://mate-academy.github.io/react_people-table/api/people.json';\n\nexport const getData = (): Promise<Person[]> => {\n  return fetch(URL).then(response => response.json());\n};\n\nexport const loadPeople = async (): Promise<PersonWithParents[]> => {\n  const people = await getData();\n\n  return (\n    people.map((person) => (\n      {\n        ...person,\n        father: people.find(father => person.fatherName === father.name),\n        mother: people.find(mother => person.motherName === mother.name),\n      }\n    ))\n  );\n};\n","import React,\n{\n  useEffect,\n  useState,\n  ChangeEventHandler,\n  MouseEventHandler,\n} from 'react';\nimport { useHistory, useLocation } from 'react-router';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { DebounceInput } from 'react-debounce-input';\nimport { PeopleTable } from './PeopleTable';\nimport { loadPeople } from '../api';\nimport { PersonWithParents } from './types';\n\nexport const PeoplePage = (props: RouteComponentProps) => {\n  const history = useHistory();\n  const location = useLocation();\n  const searchParams = new URLSearchParams(location.search);\n\n  const query = searchParams.get('query') || '';\n  const [people, setPeople] = useState<PersonWithParents[]>([]);\n  const [visiblePeople, setVisiblePeople] = useState<PersonWithParents[]>([]);\n\n  const onChange: ChangeEventHandler<HTMLInputElement> = ({ target }) => {\n    searchParams.set('query', target.value);\n    history.push({\n      search: searchParams.toString(),\n    });\n  };\n\n  useEffect(() => {\n    loadPeople().then(setPeople);\n    setVisiblePeople(people);\n  }, []);\n\n  useEffect(() => {\n    setVisiblePeople(people\n      .filter(person => person.name.toLowerCase().includes(query.toLowerCase())\n        || person.fatherName?.toLowerCase().includes(query.toLowerCase())\n        || person.motherName?.toLowerCase().includes(query.toLowerCase())));\n  }, [query, people]);\n\n  const handleSorting: MouseEventHandler<{innerHTML: string}> = (event) => {\n    const sortParam = event.currentTarget === null ? '' : event.currentTarget.innerHTML;\n\n    searchParams.set('sortBy', sortParam);\n    if (searchParams.get('sortOrder') === 'asc') {\n      searchParams.set('sortOrder', 'desc');\n    } else {\n      searchParams.set('sortOrder', 'asc');\n    }\n\n    history.push({\n      search: searchParams.toString(),\n    });\n  };\n\n  return (\n    <>\n      <h2>People page</h2>\n      <DebounceInput\n        className=\"form-control shadow-lg p-3 mb-5 bg-white rounded\"\n        debounceTimeout={500}\n        type=\"text\"\n        value={query}\n        onChange={onChange}\n        placeholder=\"search\"\n      />\n      <PeopleTable peoples={visiblePeople} url={props.match.url} handleSorting={handleSorting} />\n    </>\n  );\n};\n","import React from 'react';\n\nexport const Error404 = () => {\n  return (\n    <h1>Page not found</h1>\n  );\n};\n","import React from 'react';\nimport {\n  Link,\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom';\nimport { HomePage } from './components/HomePage';\nimport { PeoplePage } from './components/PeoplePage';\nimport { Error404 } from './components/Error404';\n\nimport './App.css';\n\nconst App: React.FC = () => (\n  <div className=\"App\">\n    <header className=\"header\">\n      <Link to=\"/\" className=\"nav-link\">Home</Link>\n      <Link to=\"/people/\" className=\"nav-link\">People</Link>\n    </header>\n    <Switch>\n      <Route exact path=\"/home\"><Redirect to=\"/\" /></Route>\n      <Route path=\"/\" exact component={HomePage} />\n      <Route path=\"/people/:personSlug?\" component={PeoplePage} />\n      <Route path=\"/:someText\" exact component={Error404} />\n    </Switch>\n  </div>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}